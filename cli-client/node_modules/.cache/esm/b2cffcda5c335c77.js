let axios,type,argv;_5c3‍.x([["Admin_ModUser",()=>Admin_ModUser]]);_5c3‍.w("axios",[["default",["axios"],function(v){axios=v}]]);_5c3‍.w("os",[["type",["type"],function(v){type=v}]]);_5c3‍.w("process",[["argv",["argv"],function(v){argv=v}]]);


var fs = require('fs')
var querystring = require('querystring')

       async function Admin_ModUser(args, token){

    if (typeof args._[1] != 'undefined'){
        console.log('You used extra parameters')
        return
    }

    if (typeof args.username === 'boolean' || typeof args.username === 'undefined' || typeof args.username === 'number'){
        console.log('You have to set parameter --username using at least one letter')
        return
    }

    if (typeof args.passw === 'boolean' || typeof args.passw === 'undefined'){
        console.log('You have to set parameter --passw')
        return
    }

    var url = 'http://localhost:8765/evcharge/api/admin/usermod/'
    url = url + args.username + '/' + args.passw

    var header = {'x-observatory-auth' : token,
                  'Content-Type' : 'application/x-www-form-urlencoded'}

    function request(url){
        axios.post(url, querystring.stringify({
            username: args.username,
            password: args.passw
        }),
        {headers : header})
        .then((response => {
            _5c3‍.g.console.log(response.data.message)
            console.log('Reminder : Your (currently logged in admin) Apikey is shown below:')
            console.log('')
            _5c3‍.g.console.log(token)
            console.log('')
        }))
        .catch((error) => {
            _5c3‍.g.console.log("Error", error.response.status)
            _5c3‍.g.console.log(error.response.data.message)
        })
    }
    request(url)
    return
}